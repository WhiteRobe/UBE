const GAMEPHASE={'WELCOME':0,'MAP':1,'WILDERNESS':2,'BATTLE':3,'WORKSHOP':4,'START_CONSTRUCT':5,'CONNECT_CONSTRUCT':6,'START_ENGINE':7,'GAME_END':8};const calendar=[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0];const audioList=["./res/audio/Still Human.mp3","./res/audio/Nilin the Memory Hunter.mp3","./res/audio/Memorize.mp3","./res/audio/Fragments.mp3"];const gp_store=new Vuex.Store({modules:{viewConstruct:constructStart,viewConnect:constructConnect,viewEngine:engineStart,viewWilderness:wildernessZone,viewBattle:battleZone},state:{version:'v1.0',clientWidth:300,debug:true,musicModeOn:false,monsterPicOn:false,gamePhase:GAMEPHASE.WELCOME,health:6,godsHand:0,doomsdayBegin:14,today:0,trash:0,perfectSearchSum:0,engineStarted:false,batteryUsingModalShow:false,connectPoiontLead:0,connectPoiontSilica:0,connectPoiontWax:0,connectPoiontQuartz:0,connectPoiontSilver:0,connectPoiontGum:0,charge_con_battery:false,charge_con_chassis:false,charge_con_lens:false,charge_con_mirror:false,charge_con_seal:false,charge_con_gate:false,connect_seal_lens_silver:false,connect_seal_quartz:false,connect_seal_mirror_silica:false,connect_gate_mirror_wax:false,connect_gate_chassis_gum:false,connect_battery_chassis_lead:false,tool_charm:true,tool_wand:true,tool_rod:true,battery_used:false,seal_used:false},mutations:{setClientWidth:(state,v)=>state.clientWidth=v,setGamePhase:(state,e)=>state.gamePhase=e,switchDebug:(state)=>state.debug=!state.debug,setMusicModeOn:(state)=>state.musicModeOn=true,setMonsterPicOn:(state)=>state.monsterPicOn=true,incHealth:(state,n)=>state.health+n<6?state.health+=n:state.health=6,incGodsHand:(state,n)=>state.godsHand+n<6?state.godsHand+=n:state.godsHand=6,incDoomsdayBegin:(state,n)=>state.doomsdayBegin+n<21?state.doomsdayBegin+=n:state.doomsdayBegin=21,incToday:(state,n)=>state.today+n<21?state.today+=n:state.today=21,incTrash:(state,n)=>state.trash+n<10?state.trash+=n:state.trash=10,incPerfectSearchSum:(state,n)=>state.perfectSearchSum+=n,setEngineStarted:(state,b)=>state.engineStarted=b,setBatteryUsingModalShow:(state,b)=>state.batteryUsingModalShow=b,incConnectPoiontLead:(state,n)=>state.connectPoiontLead+=n,incConnectPoiontSilica:(state,n)=>state.connectPoiontSilica+=n,incConnectPoiontWax:(state,n)=>state.connectPoiontWax+=n,incConnectPoiontQuartz:(state,n)=>state.connectPoiontQuartz+=n,incConnectPoiontSilver:(state,n)=>state.connectPoiontSilver+=n,incConnectPoiontGum:(state,n)=>state.connectPoiontGum+=n,rstConnetPoint:(state,component)=>{if(component==COMPONENT_NAME[0])state.connectPoiontLead=0;else if(component==COMPONENT_NAME[1])state.connectPoiontSilica=0;else if(component==COMPONENT_NAME[2])state.connectPoiontWax=0;else if(component==COMPONENT_NAME[3])state.connectPoiontQuartz=0;else if(component==COMPONENT_NAME[4])state.connectPoiontSilver=0;else if(component==COMPONENT_NAME[5])state.connectPoiontGum=0},setBattery:(state,b)=>state.charge_con_battery=b,setChassis:(state,b)=>state.charge_con_chassis=b,setLens:(state,b)=>state.charge_con_lens=b,setMirror:(state,b)=>state.charge_con_mirror=b,setSeal:(state,b)=>state.charge_con_seal=b,setGate:(state,b)=>state.charge_con_gate=b,setConnectSealLensSilver:(state,b)=>state.connect_seal_lens_silver=b,setConnectSealQuartz:(state,b)=>state.connect_seal_quartz=b,setConnectSealMirrorSilica:(state,b)=>state.connect_seal_mirror_silica=b,setConnectGateMirrorWax:(state,b)=>state.connect_gate_mirror_wax=b,setConnectGateChassisGum:(state,b)=>state.connect_gate_chassis_gum=b,setConnectBatteryChassisLead:(state,b)=>state.connect_battery_chassis_lead=b,setCharm:(state,b)=>state.tool_charm=b,setWand:(state,b)=>state.tool_wand=b,setRod:(state,b)=>state.tool_rod=b,setBatteryUsed:(state,b)=>state.battery_used=b,setSealUsed:(state,b)=>state.seal_used=b,rstHealth:(state)=>state.health=6,rstParams:(state)=>{state.gamePhase=GAMEPHASE.WELCOME,state.health=6;state.godsHand=0;state.doomsdayBegin=14;state.today=0;state.trash=0;state.perfectSearchSum=0;batteryUsingModalShow=false;state.engineStarted=false;state.connectPoiontLead=0;state.connectPoiontSilica=0;state.connectPoiontWax=0;state.connectPoiontQuartz=0;state.connectPoiontSilver=0;state.connectPoiontGum=0;state.charge_con_battery=false;state.charge_con_chassis=false;state.charge_con_lens=false;state.charge_con_mirror=false;state.charge_con_seal=false;state.charge_con_gate=false;state.connect_seal_lens_silver=false;state.connect_seal_quartz=false;state.connect_seal_mirror_silica=false;state.connect_gate_mirror_wax=false;state.connect_gate_chassis_gum=false;state.connect_battery_chassis_lead=false;state.tool_charm=true;state.tool_wand=true;state.tool_rod=true;state.battery_used=false;state.seal_used=false;}},actions:{rstParams:(context)=>{context.commit('rstParams');context.commit('viewConstruct/rstParams');context.commit('viewConnect/rstParams');context.commit('viewEngine/rstParams');context.commit('viewWilderness/rstParams');context.commit('viewBattle/rstParams')},chargeItem:(context,itemName)=>{if(itemName==TOOL_NAME[0])context.commit('setCharm',true);else if(itemName==TOOL_NAME[1])context.commit('setWand',true);else if(itemName==TOOL_NAME[2])context.commit('setRod',true);else if(itemName==CONSTRUCT_NAME[0])context.commit('setBattery',true);else if(itemName==CONSTRUCT_NAME[1])context.commit('setChassis',true);else if(itemName==CONSTRUCT_NAME[2])context.commit('setLens',true);else if(itemName==CONSTRUCT_NAME[3])context.commit('setMirror',true);else if(itemName==CONSTRUCT_NAME[4])context.commit('setSeal',true);else if(itemName==CONSTRUCT_NAME[5])context.commit('setGate',true);else return gp_store.state.debug?console.log('未知物品['+itemName+']，无法充能'):-1;if(gp_store.state.debug)console.log('物品:[ '+itemName+' ]充能成功!')},connectItem:(context,usageItemName)=>{if(usageItemName==COMPONENT_NAME[0])context.commit('setConnectBatteryChassisLead',true);else if(usageItemName==COMPONENT_NAME[1])context.commit('setConnectSealMirrorSilica',true);else if(usageItemName==COMPONENT_NAME[2])context.commit('setConnectGateMirrorWax',true);else if(usageItemName==COMPONENT_NAME[3])context.commit('setConnectSealQuartz',true);else if(usageItemName==COMPONENT_NAME[4])context.commit('setConnectSealLensSilver',true);else if(usageItemName==COMPONENT_NAME[5])context.commit('setConnectGateChassisGum',true);else return gp_store.state.debug?console.log('未知材料['+usageItemName+']，无法链接'):-1;if(gp_store.state.debug)console.log('材料:[ '+usageItemName+' ]链接成功!')},setConnectItemPoint:(context,params)=>{let usageItemName=params[0],point=params[1];if(usageItemName==COMPONENT_NAME[0])context.commit('incConnectPoiontLead',point);else if(usageItemName==COMPONENT_NAME[1])context.commit('incConnectPoiontSilica',point);else if(usageItemName==COMPONENT_NAME[2])context.commit('incConnectPoiontWax',point);else if(usageItemName==COMPONENT_NAME[3])context.commit('incConnectPoiontQuartz',point);else if(usageItemName==COMPONENT_NAME[4])context.commit('incConnectPoiontSilver',point);else if(usageItemName==COMPONENT_NAME[5])context.commit('incConnectPoiontGum',point);else return gp_store.state.debug?console.log('未知材料['+usageItemName+']，无法链接'):-1;if(gp_store.state.debug)console.log('材料:[ '+usageItemName+' ]链接成功!连接点:'+point+'.')}}});const inventory=new Vuex.Store({state:{com_lead:0,com_silica:0,com_wax:0,com_quartz:0,com_silver:0,com_gum:0,con_battery:false,con_chassis:false,con_lens:false,con_mirror:false,con_seal:false,con_gate:false,tre_plat:false,tre_bracelet:false,tre_moonlace:false,tre_scale:false,tre_shard:false,tre_record:false},mutations:{incLead:(state,n)=>{state.com_lead+=n;if(state.com_lead>4)state.com_lead=4;if(state.com_lead<0)state.com_lead=0},incSilica:(state,n)=>{state.com_silica+=n;if(state.com_silica>4)state.com_silica=4;if(state.com_silica<0)state.com_silica=0},incWax:(state,n)=>{state.com_wax+=n;if(state.com_wax>4)state.com_wax=4;if(state.com_wax<0)state.com_wax=0},incQuartz:(state,n)=>{state.com_quartz+=n;if(state.com_quartz>4)state.com_quartz=4;if(state.com_quartz<0)state.com_quartz=0},incSilver:(state,n)=>{state.com_silver+=n;if(state.com_silver>4)state.com_silver=4;if(state.com_silver<0)state.com_silver=0},incGum:(state,n)=>{state.com_gum+=n;if(state.com_gum>4)state.com_gum=4;if(state.com_gum<0)state.com_gum=0},setBattery:(state,b)=>state.con_battery=b,setChassis:(state,b)=>state.con_chassis=b,setLens:(state,b)=>state.con_lens=b,setMirror:(state,b)=>state.con_mirror=b,setSeal:(state,b)=>state.con_seal=b,setGate:(state,b)=>state.con_gate=b,setPlat:(state,b)=>state.tre_plat=b,setBracelet:(state,b)=>state.tre_bracelet=b,setMoonlace:(state,b)=>state.tre_moonlace=b,setScale:(state,b)=>state.tre_scale=b,setShard:(state,b)=>state.tre_shard=b,setRecord:(state,b)=>state.tre_record=b,rstInventory:(state)=>{state.com_lead=0;state.com_silica=0;state.com_wax=0;state.com_quartz=0;state.com_silver=0;state.com_gum=0;state.con_battery=false;state.con_chassis=false;state.con_lens=false;state.con_mirror=false;state.con_seal=false;state.con_gate=false;state.tre_plat=false;state.tre_bracelet=false;state.tre_moonlace=false;state.tre_scale=false;state.tre_shard=false;state.tre_record=false;}},actions:{findItem:(context,itemName)=>{if(itemName==COMPONENT_NAME[0])context.commit('incLead',1);else if(itemName==COMPONENT_NAME[1])context.commit('incSilica',1);else if(itemName==COMPONENT_NAME[2])context.commit('incWax',1);else if(itemName==COMPONENT_NAME[3])context.commit('incQuartz',1);else if(itemName==COMPONENT_NAME[4])context.commit('incSilver',1);else if(itemName==COMPONENT_NAME[5])context.commit('incGum',1);else if(itemName==CONSTRUCT_NAME[0])context.commit('setBattery',true);else if(itemName==CONSTRUCT_NAME[1])context.commit('setChassis',true);else if(itemName==CONSTRUCT_NAME[2])context.commit('setLens',true);else if(itemName==CONSTRUCT_NAME[3])context.commit('setMirror',true);else if(itemName==CONSTRUCT_NAME[4])context.commit('setSeal',true);else if(itemName==CONSTRUCT_NAME[5])context.commit('setGate',true);else if(itemName==TREASURE_NAME[0])context.commit('setPlat',true);else if(itemName==TREASURE_NAME[1])context.commit('setBracelet',true);else if(itemName==TREASURE_NAME[2])context.commit('setMoonlace',true);else if(itemName==TREASURE_NAME[3])context.commit('setScale',true);else if(itemName==TREASURE_NAME[4])context.commit('setShard',true);else if(itemName==TREASURE_NAME[5])context.commit('setRecord',true);else return gp_store.state.dubug?console.log('未知物品'+itemName+', inventory无法添加'):-1;if(gp_store.state.debug)console.log('找到物品:[ '+itemName+' ]!')}}});